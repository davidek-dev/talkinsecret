---
// src/components/Music.astro
import MusicPlayer from '../components/MusicPlayer';
import '../styles/music-section.css';
import '../styles/debug.css';
import '../styles/playlist-styles.css';

// We no longer fetch data here. The React component will handle it.
---

<section id="music" class="music-section" aria-labelledby="music-heading">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-screen-2xl">
    <header class="pb-8 sm:pb-12 text-center text-white">
      <h2 id="music-heading" class="text-2xl sm:text-3xl lg:text-4xl font-bandfont">
        Petrichor
      </h2>
      <p class="text-base sm:text-lg lg:text-xl mt-2"> 
        Now available on all major streaming platforms!
      </p>
    </header>
    
    <div class="music-container">
      {/* The MusicPlayer now fetches its own data and handles its own loading/error states.
        We no longer pass any props to it.
      */}
      <MusicPlayer client:only="react" />
      
      <aside class="services-container mt-8 lg:mt-0" aria-labelledby="streaming-heading">
        <h3 id="streaming-heading" class="sr-only">Streaming-Plattformen</h3>
        <div class="music-services-flex">
          <style>
            /* Direkte Überschreibung für hohe Auflösungen */
            @media (min-width: 1800px) {
              .service-tile {
                max-width: 140px !important;
                padding: 1.2rem !important;
                aspect-ratio: 1.5 !important;
              }
              
              .service-icon img {
                max-width: 85px !important;
                max-height: 58px !important;
              }
              
              .service-icon {
                padding: 0.35rem !important;
              }
              
              .music-services-flex {
                gap: 1.6rem !important;
                max-width: 460px !important;
                margin: 0 auto 1.6rem !important;
                padding-bottom: 1.2rem !important;
              }
            }
          </style>
          <a 
            href="https://open.spotify.com/intl-de/album/2n3P39BKiFLF71iH1nmiv6" 
            class="service-tile focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-black transition-all duration-200" 
            target="_blank" 
            rel="noopener noreferrer"
            aria-label="Album Petrichor auf Spotify anhören (öffnet neues Fenster)"
          >
            <span class="service-icon" aria-hidden="true">
              <img 
                src="/images/Spotify_logo_with_text.svg" 
                alt="" 
                style="filter: brightness(0) invert(1);" 
                loading="lazy"
                width="80"
                height="80"
              />
            </span>
          </a>
          
          <a 
            href="https://music.apple.com/de/album/petrichor/1789391867" 
            class="service-tile focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 focus:ring-offset-black transition-all duration-200" 
            target="_blank" 
            rel="noopener noreferrer"
            aria-label="Album Petrichor auf Apple Music anhören (öffnet neues Fenster)"
          >
            <span class="service-icon" aria-hidden="true">
              <img 
                src="/images/Apple_Music_logo.svg" 
                alt="" 
                style="filter: brightness(0) invert(1);" 
                loading="lazy"
                width="80"
                height="80"
              />
            </span>
          </a>
          
          <a 
            href="https://music.youtube.com/playlist?list=OLAK5uy_mwGChRREfOau5FJbcwTGlMN1qDTrt73B0" 
            class="service-tile focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-black transition-all duration-200" 
            target="_blank" 
            rel="noopener noreferrer"
            aria-label="Album Petrichor auf YouTube Music anhören (öffnet neues Fenster)"
          >
            <span class="service-icon" aria-hidden="true">
              <img 
                src="/images/YT_Music.svg" 
                alt="" 
                style="filter: brightness(0) invert(1);" 
                loading="lazy"
                width="80"
                height="80"
              />
            </span>
          </a>
          
          <a 
            href="https://music.amazon.de/albums/B0DSCK96HY" 
            class="service-tile focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-black transition-all duration-200" 
            target="_blank" 
            rel="noopener noreferrer"
            aria-label="Album Petrichor auf Amazon Music anhören (öffnet neues Fenster)"
          >
            <span class="service-icon" aria-hidden="true">
              <img 
                src="/images/Amazon_Music_(Logo).svg" 
                alt="" 
                style="filter: brightness(0) invert(1);" 
                loading="lazy"
                width="80"
                height="80"
              />
            </span>
          </a>
          
          <a 
            href="https://www.deezer.com/de/album/693504991" 
            class="service-tile focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-black transition-all duration-200" 
            target="_blank" 
            rel="noopener noreferrer"
            aria-label="Album Petrichor auf Deezer anhören (öffnet neues Fenster)"
          >
            <span class="service-icon" aria-hidden="true">
              <img 
                src="/images/Deezer_logo,_2023.svg" 
                alt="" 
                style="filter: brightness(0) invert(1);" 
                loading="lazy"
                width="80"
                height="80"
              />
            </span>
          </a>
        </div>
      </aside>
    </div>
  </div>
</section>
```